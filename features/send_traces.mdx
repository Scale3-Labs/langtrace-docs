---
title: Sending Traces
sidebarTitle: Sending Traces
---

<Warning>
  {" "}
  Using the `custom_remote_exporter` or `api_host` option with a custom url will
  cause majority of the langtrace features to not work and should only be used if
  **Langtrace** is being used only to **capture** and **send** traces{" "}
</Warning>

Traces are sent to Langtrace Cloud by default. You can send traces to a custom endpoint by either using a custom exporter or setting the api_host option.
The simplest way to export traces to a custom endpoint is to set the `api_host` parameter in the `Langtrace.init` function. This will allow you to export traces to a custom endpoint.

<CodeGroup>
```typescript Typescript SDK
import * as Langtrace from "@langtrase/typescript-sdk";
Langtrace.init({
  write_spans_to_console: true,
  api_host: "https://example.com/"
})
// Your application code here
```

```python Python SDK
from langtrace_python_sdk import langtrace
langtrace.init(
  write_spans_to_console=True,
  api_host="https://example.com/"
)
# Your application code here
```

</CodeGroup>

This can also be done by passing a custom exporter to the `custom_remote_exporter` parameter in the `Langtrace.init` function. The `custom_remote_exporter` option will take precedence over the `api_host` option.

### Custom Exporter Example

<Tabs>
<Tab title="Typescript SDK">
<CodeGroup>
```typescript init.ts
import * as Langtrace from "@langtrase/typescript-sdk";
import { CustomExporter } from './custom_exporter'
Langtrace.init({
  write_spans_to_console: true,
  custom_remote_exporter: new CustomExporter("https://example.com/")
})
// Your application code here
```

```typescript custom_exporter.ts
// CustomExporter.ts
import { SpanExporter, ReadableSpan } from "@opentelemetry/sdk-trace-base";
import axios from "axios";

export class CustomExporter implements SpanExporter {
  private readonly apiHost: string;

  constructor(apiHost: string) {
    this.apiHost = apiHost;
  }

  async export(
    spans: ReadableSpan[],
    resultCallback: (result: any) => void
  ): Promise<void> {
    const data = spans.map((span) => ({
      traceId: span.spanContext().traceId,
      spanId: span.spanContext().spanId,
      name: span.name,
      startTime: span.startTime,
      endTime: span.endTime,
      attributes: span.attributes,
    }));

    const headers = { "Content-Type": "application/json" };

    try {
      const response = await axios.post(this.apiHost, data, { headers });
      resultCallback({ code: response.status === 200 ? 0 : 1 });
    } catch (error: any) {
      resultCallback({
        code: 1,
        error: new Error(`Failed to export spans: ${error.message}`),
      });
    }
  }

  async shutdown(): Promise<void> {
    return await Promise.resolve();
  }
}
```

</CodeGroup>
</Tab>
<Tab title="Python SDK">
<CodeGroup>
```python init.py
from langtrace_python_sdk import langtrace
from custom_exporter import CustomExporter

langtrace.init(
write_spans_to_console=True,
custom_remote_exporter=CustomExporter("https://example.com/")
)

# Your application code here

````

```python custom_exporter.py
# custom_exporter.py
import json
import typing
import requests
from opentelemetry.sdk.trace.export import ReadableSpan, SpanExporter, SpanExportResult

class CustomExporter(SpanExporter):
    def __init__(self, api_host: str) -> None:
        self.api_host = api_host

    def export(self, spans: typing.Sequence[ReadableSpan]) -> SpanExportResult:
        data = [
            {
                "traceId": span.get_span_context().trace_id,
                "spanId": span.get_span_context().span_id,
                "name": span.name,
                "startTime": span.start_time,
                "endTime": span.end_time,
                "attributes": span.attributes,
            }
            for span in spans
        ]

        try:
            response = requests.post(
                url=self.api_host,
                data=json.dumps(data),
                headers={"Content-Type": "application/json"},
                timeout=20,
            )

            return SpanExportResult.SUCCESS if response.ok else SpanExportResult.FAILURE

        except requests.RequestException:
            return SpanExportResult.FAILURE

    def shutdown(self) -> None:
        pass
````

</CodeGroup>
</Tab>
</Tabs>
